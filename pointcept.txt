0.å®‰è£…condaç¯å¢ƒ



1. æ‹‰å–æ”¯æŒ 5090 çš„å®˜æ–¹é•œåƒ  æƒé™æ‹¦è·¯è™ï¼ğŸ¯
æˆ‘ä»¬éœ€è¦ 25.01 æˆ–æ›´æ–°çš„ç‰ˆæœ¬ï¼ˆé€šå¸¸ 1 æœˆå‘å¸ƒçš„é•œåƒå¼€å§‹æ”¯æŒ 5090ï¼‰ã€‚
# æ‹‰å– NVIDIA PyTorch é•œåƒ (å†…å« CUDA 12.8+, PyTorch 2.5+, ä¸”é’ˆå¯¹ Blackwell ä¼˜åŒ–)
sudo docker pull nvcr.io/nvidia/pytorch:25.01-py3


2. å¯åŠ¨å®¹å™¨ (æŒ‚è½½ä½ çš„ä»£ç ç›®å½•)
å‡è®¾ä½ åœ¨ ~/blz ç›®å½•ä¸‹ï¼š

Bash
# --gpus all: å¯ç”¨æ˜¾å¡
# --ipc=host: é˜²æ­¢å¤šå¡è®­ç»ƒæ—¶å†…å­˜ä¸è¶³ (Pointcept å¿…é¡»)
# -v: å°†å½“å‰ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…çš„ /workspace
docker run --gpus all -it --rm --ipc=host -v $(pwd):/workspace nvcr.io/nvidia/pytorch:25.01-py3

3. å®¹å™¨å†…éªŒè¯ (The Final Check)
è¿›å…¥å®¹å™¨åï¼Œå†æ¬¡è¿è¡Œé‚£ä¸ª Python æµ‹è¯•ã€‚å¦‚æœè¿™æ¬¡è¿˜æ²¡è¿‡ï¼Œé‚£å°±æ˜¯ NVIDIA é©±åŠ¨å±‚é¢çš„é—®é¢˜äº†ï¼ˆä½†æ¦‚ç‡æå°ï¼‰ã€‚

# å¯åŠ¨å®¹å™¨å¹¶æŒ‚è½½å½“å‰ç›®å½•
sudo docker run --gpus all -it --rm --ipc=host -v $(pwd):/workspace nvcr.io/nvidia/pytorch:25.01-py3
# è¿›å…¥å®¹å™¨åï¼Œç›´æ¥è¿è¡Œ Python éªŒè¯
python -c "import torch; print(f'CUDA: {torch.version.cuda}'); print(f'Device: {torch.cuda.get_device_name(0)}'); a = torch.randn(1000).cuda(); print('Success! 5090 is READY.')"

exit é€€å‡º sudo docker exec -it bole_lab bash è¿›å…¥

# é€€å‡ºå½“å‰å®¹å™¨
exit

# é‡æ–°å¯åŠ¨ï¼ˆæ³¨æ„å¤šäº†ç¬¬äºŒè¡Œ -vï¼‰
sudo docker run --gpus all -it \
  --name bole_lab_final \
  --shm-size=32g \
  -v /home/bolezhang/blz/Pointcept:/workspace/Pointcept \
  -v /data/datasets:/data/datasets \
  ptv3_gpu_image /bin/bash

sudo docker start -ai bole_lab_final

sudo docker exec -it bole_lab_final bash

sh scripts/train.sh -g 1 -d sensaturban -c semseg-pt-v3m1-0-base -n SensatUrban-PTV3-Base -w exp/sensaturban/SensatUrban-PTV3-Base/model/model_best.pth

4.å®‰è£…åŒ…

pip install spconv-cu120 ç­‰ç­‰

5.æ£€æŸ¥ï¼š

python -c 'import pointops; print("PointOps is ready")'

python -c "import torch; print(f'Torch: {torch.__version__}, CUDA: {torch.version.cuda}')"


è®­ç»ƒï¼š

export CUDA_LAUNCH_BLOCKING=1

sh scripts/train.sh -g 1 -d stpls3d -c semseg-pt-v3m1-0-base -n exp_stpls3d_5090 -w model_best
sh scripts/train.sh -g 1 -d sensaturban -c semseg-pt-v3m1-0-base -n SensatUrban-PTV3-BaseÂ -w model_best

æ–°çš„è®­ç»ƒè„šæœ¬ï¼š

sh scripts/train.sh -g 1 -d stpls3d -c semseg-pt-v3m1-0-base-6cls-focal -n exp_stpls3d_5090_6cls_focal
sh scripts/train.sh -g 1 -d sensaturban -c semseg-pt-v3m1-0-base-focal -n exp_sensaturban_5090_focal